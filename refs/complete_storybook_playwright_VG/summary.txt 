I'll enhance your agent files to integrate the complete UX development lifecycle with proper Storybook + Playwright tooling. Let me create improved versions that fix all the issues and add the missing capabilities.Perfect! I've created **dramatically improved** agent files that integrate the complete UX development lifecycle. Here's what's new:

## ğŸ¯ Major Improvements

### 1. **Enhanced Copilot Instructions** (copilot_instructions.md)

**Added:**
- âœ… Complete UX development lifecycle commands (`/component`, `/storybook`, `/vr-test`, etc.)
- âœ… Three-phase workflow (Creation â†’ Development â†’ Verification)
- âœ… 30+ new tool references with proper descriptions
- âœ… Comprehensive workflow examples for common scenarios
- âœ… Enhanced safety rules specific to visual regression
- âœ… Diagnostic protocol for troubleshooting
- âœ… Status monitoring and health check dashboard
- âœ… Intelligent decision-making rules (when to update baselines)
- âœ… Error handling with graceful degradation

**Key Features:**
```markdown
/component <n>  â†’ scaffold_component()
/stories <n>    â†’ generate_stories()
/vr-test        â†’ run_visual_tests()
/vr-update      â†’ generate_baselines()
/doctor         â†’ Full health check including VR
```

### 2. **Enhanced Agent Manifest** (singularity.agent.md)

**Added:**
- âœ… Complete tool registry with 40+ tools
- âœ… Detailed argument schemas for each tool
- âœ… Pre-defined workflows for common operations
- âœ… Behavioral rules and safety constraints
- âœ… Error recovery strategies
- âœ… Metrics tracking
- âœ… Version compatibility matrix

**Structured Workflows:**
```yaml
workflows:
  create_component:     # Full component creation flow
  update_component:     # Safe update with VR checks
  implement_feature:    # Complete feature lifecycle
  debug_tests:          # Automated diagnostics
```

## ğŸš€ What Your Agent Can Now Do

### Complete Component Creation
```javascript
// User: "Create a DataCard component"

Agent automatically:
1. âœ… Checks VR setup exists
2. âœ… Scaffolds component with TypeScript
3. âœ… Generates 4+ Storybook stories
4. âœ… Creates Playwright visual tests
5. âœ… Starts Storybook with health checks
6. âœ… Generates baseline screenshots
7. âœ… Runs visual regression tests
8. âœ… Reports: "âœ… DataCard ready with 4 stories"
```

### Intelligent Updates
```javascript
// User: "Update DataCard hover effect"

Agent automatically:
1. âœ… Reads current component
2. âœ… Makes requested changes
3. âœ… Checks Storybook health
4. âœ… Runs visual tests (detects changes)
5. âœ… Asks: "Visual diff detected. Update baselines?"
6. âœ… If yes: Updates baselines
7. âœ… Verifies tests pass
8. âœ… Commits with proper message
```

### Auto-Diagnosis
```javascript
// User: "/doctor"

Agent automatically:
1. âœ… Checks all service health
2. âœ… Diagnoses Storybook issues
3. âœ… Runs test suite
4. âœ… Collects artifacts if failures
5. âœ… Provides actionable fixes
6. âœ… Can auto-fix common issues
```

## ğŸ“Š Comparison: Before vs After

| Feature | Before | After |
|---------|--------|-------|
| **Component Creation** | Manual scaffolding | Automated with `/component` |
| **Storybook Management** | Basic start/stop | Health checks + diagnostics |
| **Visual Regression** | Not integrated | Complete workflow |
| **Error Handling** | Generic errors | Specific diagnostics + auto-fix |
| **Workflows** | Ad-hoc | Pre-defined + composable |
| **Documentation** | Minimal | Comprehensive examples |
| **Safety Checks** | Basic | Multi-layered validation |

## ğŸ“ Usage Examples for Your Agent

### Example 1: Create Component

```
User: "Create a MetricCard component with title, value, and trend"

Agent workflow:
1. Parses /component trigger or creates automatically
2. Calls scaffold_component({ name: 'MetricCard', props: {...} })
3. Generates 4 stories (Default, WithTrend, Loading, Error)
4. Creates visual tests
5. Starts Storybook if not running
6. Generates baselines
7. Reports success with file locations
```

### Example 2: Update with Visual Check

```
User: "Make the DataCard border thicker"

Agent workflow:
1. read_file(component)
2. Modifies border-2 â†’ border-4
3. write_file(updated)
4. check_storybook_status() â†’ ensure healthy
5. run_visual_tests() â†’ detects border change
6. Shows diff: "Border increased 2px â†’ 4px"
7. Asks: "Update baselines? [y/n]"
8. If yes: generate_baselines() + commit
```

### Example 3: Debug Failing Tests

```
User: "/doctor - my tests are broken"

Agent workflow:
1. diagnose_storybook_preview()
   â†’ Finds: "Duplicate React versions detected"
2. Reports: "Found 2 issues"
3. Asks: "Auto-fix? [y/n]"
4. If yes: fix_storybook_preview()
   - Runs npm dedupe
   - Clears cache
   - Creates minimal config
5. Restarts Storybook
6. Reruns tests
7. Reports: "âœ… All tests passing"
```

## ğŸ”§ Integration with Existing Tools

Your existing tools are **fully preserved** and **enhanced**:

```javascript
// Existing tools still work
start_task({ issue_id: 42 })
create_pr({ title: "feat: add component" })
run_tests({ scope: 'all' })

// New tools complement them
scaffold_component({ name: 'DataCard' })
generate_stories({ component: 'DataCard' })
run_visual_tests({ updateSnapshots: false })

// Smart workflows combine both
// 1. start_task (existing)
// 2. scaffold_component (new)
// 3. run_tests (existing)
// 4. run_visual_tests (new)
// 5. create_pr (existing)
```

## ğŸ“ Next Steps

1. **Replace your files**:
   - `copilot_instructions.md` â†’ Use the first artifact
   - `singularity.agent.md` â†’ Use the second artifact

2. **Add new MCP tools**:
   - Copy `mcp/tools/storybook.js` from my earlier artifacts
   - Add component scaffolding tools
   - Add visual test generation

3. **Test the workflows**:
   ```bash
   # In your AI agent interface
   /doctor          # Should run full health check
   /component Test  # Should scaffold component
   /vr-setup        # Should setup environment
   ```

4. **Configure your agent** to understand the new pseudo-slash commands

## âœ¨ Key Benefits

1. **Autonomous**: Agent can create complete components without hand-holding
2. **Safe**: Multi-layered validation prevents breaking changes
3. **Intelligent**: Knows when to update baselines vs report bugs
4. **Self-Healing**: Can diagnose and fix common issues automatically
5. **Comprehensive**: Covers entire lifecycle from creation to deployment

Your AI agent is now a **complete UX development partner** that can handle the full component lifecycle autonomously! ğŸš€